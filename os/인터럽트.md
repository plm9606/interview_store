**π’CONTENTS**

- [μΈν„°λ½νΈλ€?](#μΈν„°λ½νΈλ€?)
  - [ν•λ“μ›¨μ–΄ μΈν„°λ½νΈ](#ν•λ“μ›¨μ–΄-μΈν„°λ½νΈ)
  - [μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈ](#μ†ν”„νΈμ›¨μ–΄-μΈν„°λ½νΈ)
- [κ·Έλμ„ μΈν„°λ½νΈ, μ™ ν•λ”κ±°μ”?](#κ·Έλμ„-μΈν„°λ½νΈ,-μ™-ν•λ”κ±°μ”?)
- [μΈν„°λ½νΈ κ³Όμ •](#μΈν„°λ½νΈ-κ³Όμ •)
- [μΈν„°λ½νΈμ™€ νΉκ¶ λ…λ Ή](#μΈν„°λ½νΈμ™€-νΉκ¶-λ…λ Ή)
  - [λ…λ Ήμ–΄μ μΆ…λ¥](#λ…λ Ήμ–΄μ-μΆ…λ¥)
- [kernel mode vs user mode](#kernel-mode-vs-user-mode)
  - [κ³Όμ •μ„ μ‚΄ν΄λ³΄μ](#κ³Όμ •μ„-μ‚΄ν΄λ³΄μ)
- [κ΄€λ ¨ μ©μ–΄](#κ΄€λ ¨-μ©μ–΄)
  - [μΈν„°λ½νΈ ν•Έλ“¤λ¬](#μΈν„°λ½νΈ-ν•Έλ“¤λ¬)
  - [μΈν„°λ½νΈ λ²΅ν„°](#μΈν„°λ½νΈ-λ²΅ν„°)
  - [PCB(Process Control Block)](#pcbprocess-control-block)

# μΈν„°λ½νΈ

## μΈν„°λ½νΈλ€?

μ£Όλ³€μ¥μΉμ™€ μ…μ¶λ ¥ μ¥μΉλ” CPUλ‚ λ©”λ¨λ¦¬μ™€ λ‹¬λ¦¬ `μΈν„°λ½νΈ`λΌλ” λ©”μ»¤λ‹μ¦μ„ ν†µν•΄ κ΄€λ¦¬λλ‹¤.

CPUκ°€ ν”„λ΅κ·Έλ¨μ„ μ‹¤ν–‰ν•κ³  μμ„ λ•, μ…μ¶λ ¥ ν•λ“μ›¨μ–΄ λ“±μ μ¥μΉλ‚ μμ™Έμƒν™©μ΄ λ°μƒν•μ—¬ μ²λ¦¬κ°€ ν•„μ”ν•  κ²½μ°μ— λ§μ΄ν¬λ΅ν”„λ΅μ„Έμ„μ—κ² μ•λ ¤ μ²λ¦¬ν•  μ μλ„λ΅ ν•λ” κ²ƒμ„ λ§ν•λ‹¤.

μΈν„°λ½νΈλ” CPUκ°€ μ•„λ‹ λ‹¤λ¥Έ ν•λ“μ›¨μ–΄ μ¥μΉκ°€

- CPUμ—κ² μ–΄λ–¤ μ‚¬μ‹¤μ„ μ•λ ¤μ£Όκ±°λ‚
- CPUμ μ„λΉ„μ¤λ¥Ό μ”μ²­ν•΄μ•Όν•  κ²½μ°

CPUλ‚΄μ— μλ” μΈν„°λ½νΈλΌμΈμ„ μ„Έν…ν•΄ λ°μƒμ‹ν‚¨λ‹¤.

μΈν„°λ½νΈλ” ν¬κ² `ν•λ“μ›¨μ–΄ μΈν„°λ½νΈ`μ™€ `μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈ`λ΅ λ‚λ‰λ‹¤.

### ν•λ“μ›¨μ–΄ μΈν„°λ½νΈ

ν•λ“μ›¨μ–΄κ°€ λ°μƒμ‹ν‚¤λ” μΈν„°λ½νΈλ΅, CPUκ°€ μ•„λ‹ λ‹¤λ¥Έ ν•λ“μ›¨μ–΄ μ¥μΉκ°€ cpuμ— μ–΄λ–¤ μ‚¬μ‹¤μ„ μ•λ ¤μ£Όκ±°λ‚ cpu μ„λΉ„μ¤λ¥Ό μ”μ²­ν•΄μ•Ό ν•  κ²½μ° λ°μƒμ‹ν‚¨λ‹¤.

### μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈ

μ†ν”„νΈμ›¨μ–΄κ°€ λ°μƒμ‹ν‚¤λ” μΈν„°λ½νΈμ΄λ‹¤. μ†ν”„νΈμ›¨μ–΄(μ‚¬μ©μ ν”„λ΅κ·Έλ¨)κ°€ μ¤μ¤λ΅ μΈν„°λ½νΈ λΌμΈμ„ μ„Έν…ν•λ‹¤.

μΆ…λ¥: μμ™Έ μƒν™©, system call

μΈν„°λ½νΈλ¥Ό λ°μƒμ‹ν‚¤κΈ° μ„ν•΄ ν•λ“μ›¨μ–΄/μ†ν”„νΈμ›¨μ–΄λ” cpuλ‚΄μ— μλ” `μΈν„°λ½νΈ λΌμΈ`μ„ μ„Έν…ν•μ—¬ μΈν„°λ½νΈλ¥Ό λ°μƒμ‹ν‚¨λ‹¤.
cpuλ” λ§¤λ² λ…λ Ήμ„ μν–‰ν•κΈ° μ „μ— μΈν„°λ½νΈλΌμΈμ΄ μ„Έν…λμ–΄μλ”μ§€λ¥Ό κ²€μ‚¬ν•λ‹¤.

## κ·Έλμ„ μΈν„°λ½νΈ, μ™ ν•λ”κ±°μ”?

κ·Έ μ΄μ λ” **μ…μ¶λ ¥ μ—°μ‚°μ΄ CPU λ…λ Ή μν–‰μ†λ„λ³΄λ‹¤ ν„μ €ν λλ¦¬κΈ° λ•λ¬Έμ΄λ‹¤.**

μ΄μμ²΄μ λ¥Ό μ•…λ• μ‚¬μ¥λ‹, CPUλ¥Ό λΉ„μ‹Ό μ›”κΈ‰ μ£Όκ³  λ°λ ¤μ¨ κ³ μ¤κΈ‰ μΈλ ¥μ΄λΌκ³  μƒκ°ν•΄λ³΄μ. μ•…λ• μ‚¬μ¥ μ…μ¥μ—μ„λ” λΉ„μ‹Όλ λ“¤μ—¬μ¨ λ§νΌ κ³ μ¤κΈ‰ μΈλ ¥μ΄ μ‰¬μ§€μ•κ³  μΌν•΄μ„ λκ°’μ„ ν–μΌλ©΄ μΆ‹κ² λ‹¤κ³  μƒκ°ν•  κ²ƒμ΄λ‹¤.

![](https://hiphapis.files.wordpress.com/2014/03/screen-shot-2014-03-18-at-4-49-54-pm.png?w=250)

> λ‚΄ ν”Όκ°™μ€ λ! λ½•μ„ λ½‘μ•„λ¨Ήκ² μ–΄! _(κ³ μ©λ…Έλ™λ¶€ κµ­λ²μ—†μ΄ 1350)_

κ·Έλ°λ° μ•„μ£Ό μ¤λκ±Έλ¦¬μ§€λ§ μ–΄λ ¤μ΄ μΌμ΄ μ•„λ‹ μ…μ¶λ ¥ μ—°μ‚°μ„ CPUκ°€ λ§¤λ² κΈ°λ‹¤λ¦°λ‹¤λ©΄(μ›”κΈ‰λ£¨ν΅ ν•λ‹¤λ©΄)...? λΉ„μ‹Ό λ μ£Όκ³  λ¨μ…”μ¨ CPUλ¥Ό λ°±λ¶„ ν™μ©ν•μ§€ λ»ν•΄ μ΄μμ²΄μ  μ‚¬μ¥λ‹μ€ ν™μ¥ν•  μ§€κ²½.

CPUκ°€ μ…μ¶λ ¥ μ²λ¦¬λ¥Ό κΈ°λ‹¤λ¦¬λ©° μ‰¬λ” κΌ΄μ„ λ»λ³΄λ” μ‚¬μ¥λ‹μ€ μ—°μ‚° κ²°κ³Όκ°€ λ‚μ¬ λ• κΉμ§€ λ‹¤λ¥Έ μΌμ„ μ‹ν‚¨λ‹¤. μ°λ¦¬ μ§μ› λ½•μ„ λ½‘μ•„μ•Όν•λ‹κΉ!

κ·Έλ¦¬κ³  μ…μ¶λ ¥ μ§μ›μ—κ² μμ‹ μ μ—…λ¬΄κ°€ μ™„λ£λλ©΄ κ·Έλ• CPUμ„ λ°°λ‹μ—κ² μ‘μ—… μ™„λ£λ¥Ό μ•λ¦¬λΌκ³  μΌλ¬λ‘”λ‹¤. μ•λ¦Όμ΄ μ¤λ©΄ CPUκ°€ λ‹¤μ‹ ν•΄λ‹Ή μ‘μ—…λ„ μ΄μ–΄μ„ ν•  μ μλ„λ΅ ν•λ‹¤.

μ—¬κΈ°μ„ μ…μ¶λ ¥ μ§μ›μ΄ CPUμ„ λ°°λ‹μ—κ² μ‘μ—… μ™„λ£λ¥Ό μ•λ ¤μ£Όλ” κ²ƒμ΄ `μΈν„°λ½νΈ`μ΄λ‹¤!

## μΈν„°λ½νΈ κ³Όμ •

process A μ‹¤ν–‰ μ¤‘ λ””μ¤ν¬μ—μ„ μ–΄λ–¤ λ°μ΄ν„°λ¥Ό μ½μ–΄μ¤λΌλ” λ…λ Ήμ„ λ°›μ•λ‹¤κ³  κ°€μ •ν•΄λ³΄μ.

- process Aλ” `system call`μ„ ν†µν•΄ μΈν„°λ½νΈλ¥Ό λ°μƒμ‹ν‚¨λ‹¤.
- CPUλ” ν„μ¬ μ§„ν–‰ μ¤‘μΈ κΈ°κ³„μ–΄ μ½”λ“λ¥Ό μ™„λ£ν•λ‹¤.
- ν„μ¬κΉμ§€ μν–‰μ¤‘μ΄μ—λ μƒνƒλ¥Ό ν•΄λ‹Ή processμ **PCB**(Process Control Block)μ— μ €μ¥ν•λ‹¤. (μν–‰μ¤‘μ΄λ MEMORYμ£Όμ†, λ μ§€μ¤ν„° κ°’, ν•λ“μ›¨μ–΄ μƒνƒ λ“±...)
- PC(Program Counter, IP)μ— λ‹¤μμ— μ‹¤ν–‰ν•  λ…λ Ήμ μ£Όμ†λ¥Ό μ €μ¥ν•λ‹¤.
- μΈν„°λ½νΈ λ²΅ν„°λ¥Ό μ½κ³  ISR μ£Όμ†κ°’μ„ μ–»μ–΄ **ISR**(Interrupt Service Routine)λ΅ μ ν”„ν•μ—¬ λ£¨ν‹΄μ„ μ‹¤ν–‰ν•λ‹¤.
- ν•΄λ‹Ή μ½”λ“λ¥Ό μ‹¤ν–‰ν•λ‹¤.
- ν•΄λ‹Ή μΌμ„ λ‹¤ μ²λ¦¬ν•λ©΄, λ€ν”Όμ‹ν‚¨ λ μ§€μ¤ν„°λ¥Ό λ³µμ›ν•λ‹¤.
- ISRμ λμ— IRET λ…λ Ήμ–΄μ— μν•΄ μΈν„°λ½νΈκ°€ ν•΄μ  λλ‹¤.
- IRET λ…λ Ήμ–΄κ°€ μ‹¤ν–‰λλ©΄, λ€ν”Όμ‹ν‚¨ PC κ°’μ„ λ³µμ›ν•μ—¬ μ΄μ „ μ‹¤ν–‰ μ„μΉλ΅ λ³µμ›ν•λ‹¤.

## μΈν„°λ½νΈμ™€ νΉκ¶ λ…λ Ή

### λ…λ Ήμ–΄μ μΆ…λ¥

CPUκ°€ μν–‰ν•λ” λ…λ Ήμ—λ” `μΌλ° λ…λ Ή`κ³Ό `νΉκ¶ λ…λ Ή`μ΄ μλ‹¤.

**μΌλ° λ…λ Ή**μ€ λ©”λ¨λ¦¬μ—μ„ μλ£λ¥Ό μ½μ–΄μ¤κ³ , CPUμ—μ„ κ³„μ‚°μ„ ν•λ” λ“±μ λ…λ Ήμ΄κ³  λ¨λ“  ν”„λ΅κ·Έλ¨μ΄ μν–‰ν•  μ μλ” λ…λ Ήμ΄λ‹¤.

**νΉκ¶ λ…λ Ή**μ€ λ³΄μ•μ΄ ν•„μ”ν• λ…λ ΉμΌλ΅ μ…μ¶λ ¥ μ¥μΉ, νƒ€μ΄λ¨Έ λ“±μ μ¥μΉλ¥Ό μ ‘κ·Όν•λ” λ…λ Ήμ΄λ‹¤. νΉκ¶ λ…λ Ήμ€ ν•­μƒ `μ΄μμ²΄μ `λ§μ΄ μν–‰ν•  μ μλ‹¤.

## kernel mode vs user mode

μ΄μμ²΄μ λ” ν•λ“μ›¨μ–΄μ μΈ λ³΄μ•μ„ μ μ§€ν•κΈ° μ„ν•΄ κΈ°λ³Έμ μΌλ΅ λ‘κ°€μ§€ operationμ„ μ§€μ›ν•λ‹¤.

**kernel mode**λ” `μ΄μμ²΄μ `κ°€ CPUμ μ μ–΄κ¶μ„ κ°€μ§€κ³  λ…λ Ήμ„ μν–‰ν•λ” λ¨λ“λ΅ `μΌλ° λ…λ Ή`κ³Ό `νΉκ¶ λ…λ Ή` λ¨λ‘ μν–‰ν•  μ μλ‹¤. μ»¤λ„ ν”„λ΅μ„Έμ¤κ°€ μ‹¤ν–‰λλ” μƒνƒμ΄λ‹¤.

ν•μ§€λ§ **user mode**λ” μΌλ° μ‚¬μ©μ ν”„λ΅κ·Έλ¨μ΄ CPUμ μ–΄κ¶μ„ κ°€μ§€κ³  λ…λ Ήμ„ μν–‰ν•λ” λ¨λ“μ΄κΈ° λ•λ¬Έμ— `μΌλ° λ…λ Ή`λ§μ„ μν–‰ν•  μ μλ‹¤. μ‚¬μ©μ ν”„λ΅μ„Έμ¤κ°€ μ‹¤ν–‰λλ” μƒνƒμ΄λ‹¤.

> μ΄λ ‡κ² μ΄μ¤‘ λ¨λ“λ¥Ό μ‚¬μ©ν•λ” μ΄μ λ” μ΄μμ²΄μ κ°€ `μμ›μ„ λ³΄νΈ`ν•κΈ° μ„ν•΄μ„ μ΄λ‹¤. μ΄μμ²΄μ λ§μ΄ μ‹μ¤ν… μμ›μ— μ ‘κ·Όν•  μ μκ² ν•¨μΌλ΅μ¨ μμ›μ„ λ³΄νΈν•λ” κ²ƒμ΄λ‹¤.

### κ³Όμ •μ„ μ‚΄ν΄λ³΄μ

μ„μ process Aκ°€ ν”„λ΅κ·Έλ¨ λ…λ Ή μν–‰μ¤‘μ— λ””μ¤ν¬ μ…μ¶λ ¥ λ…λ Ήμ„ μ½μ€ κ²½μ°λ¥Ό μƒκ°ν•΄ λ³΄μ. μ‚¬μ©μ ν”„λ΅κ·Έλ¨μ€ μ…μ¶λ ¥ μ¥μΉμ— μ ‘κ·Όν•λ” λ…λ Ήμ„ μν–‰ν•  μ μ—†λ‹¤. user modeμ—μ„ νΉκ¶ λ…λ Ήμ„ μν–‰ν•  μ μ—†κΈ° λ•λ¬Έμ΄λ‹¤.

μ΄λ ¨ κ²½μ°μ— μ‚¬μ©μ ν”„λ΅κ·Έλ¨μ€ μ΄μμ²΄μ μ—κ² `μ‹μ¤ν… μ½`μ„ ν†µν•΄ νΉκ¶λ…λ Ήμ„ λ€μ‹  μν–‰ν•΄λ‹¬λΌκ³  μ”μ²­ν•λ‹¤. μ‹μ¤ν… μ½μ€ μ£Όμ† κ³µκ°„ μμ²΄κ°€ λ‹¤λ¥Έ κ³³(μ»¤λ„μ codeμμ—­)μΌλ΅ μ΄λ™ν•΄μ•Ό ν•λ―€λ΅ **ν”„λ΅κ·Έλ¨μ΄ μ¤μ¤λ΅ μΈν„°λ½νΈ λΌμΈμ— μΈν„°λ½νΈλ¥Ό μ„Έν…**ν•λ” λ…λ Ήμ„ ν†µν•΄ μ΄λ£¨μ–΄μ§„λ‹¤.

CPUκ°€ μΈν„°λ½νΈ λΌμΈμ„ κ²€μ‚¬ν•κ³  μΈν„°λ½νΈκ°€ λ°μƒν• κ²ƒμ„ κ°μ§€ν•κ² λλ‹¤. ν„μ¬ μν–‰μ¤‘μΈ μ‚¬μ©μ ν”„λ΅κ·Έλ¨μ„ μ μ‹ λ©μ¶”κ³  CPUμ μ μ–΄κ¶μ„ `μ΄μμ²΄μ `μ—κ² μ–‘λ„ν•λ‹¤. (kernel mode) κ·Έλ¦¬κ³  μ΄ λ• ν•λ“μ›¨μ–΄μ μΌλ΅ `λ¨λ“ λΉ„νΈ`κ°€ 1μ—μ„ `0`μΌλ΅ μλ™μΌλ΅ μ„Έν…λμ–΄ νΉκ¶ λ…λ Ήμ„ μν–‰ν•  μ μκ² λλ‹¤.

![image.png](https://images.velog.io/post-images/adam2/77e17e20-2fc9-11ea-a15f-818085aba1cd/image.png)

## κ΄€λ ¨ μ©μ–΄

### μΈν„°λ½νΈ ν•Έλ“¤λ¬

μ‹¤μ  μΈν„°λ½νΈλ¥Ό μ²λ¦¬ν•κΈ° μ„ν• λ£¨ν‹΄μΌλ΅ `μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄`μ΄λΌκ³ λ„ ν•λ‹¤.
μ΄μμ²΄μ μ μ½”λ“ μμ—­μ—λ” μΈν„°λ½νΈλ³„λ΅ μ²λ¦¬ν•΄μ•Όν•  λ‚΄μ©μ΄ μ΄λ―Έ ν”„λ΅κ·Έλ¨λμ–΄ μλ‹¤.

μΈν„°λ½νΈ λ°μƒμ‹ μ–΄λ–¤ μΌμ„ μ²λ¦¬ν•΄μ•Όν•λ”μ§€ μ •μν• ν•¨μ. λ¨λ“  μΈν„°λ½νΈλ” κΈ°λ³Έμ μΌλ΅ μΈν„°λ½νΈ ν•Έλ“¤λ¬κ°€ μ •μλμ–΄ μλ‹¤.

### μΈν„°λ½νΈ λ²΅ν„°

μΈν„°λ½λ“ λ°μƒμ‹ μ²λ¦¬ν•΄μ•Ό ν•  μΈν„°λ½νΈ ν•Έλ“¤λ¬μ μ£Όμ†λ¥Ό μΈν„°λ½νΈ λ³„λ΅ λ³΄κ΄€ν•κ³  μλ” ν…μ΄λΈ”μ΄λ‹¤. μΈν„°λ½νΈμ™€ μΈν„°λ½νΈ ν•Έλ“¤λ¬ 1:1 λ§¤ν•‘.

### PCB(Process Control Block)

μ»¤λ„μ λ°μ΄ν„° μμ—­μ— μ΅΄μ¬ν•λ©° κ°κ°μ ν”„λ΅μ„Έμ¤λ§λ‹¤ κ³ μ μ PCBκ°€ μλ‹¤.
μΈν„°λ½νΈ λ°μƒ μ‹ ν”„λ΅μ„Έμ¤μ μ–΄λ λ¶€λ¶„μ΄ μν–‰μ¤‘μ΄μ—λ”μ§€λ¥Ό μ €μ¥ν•λ‹¤.
(μν–‰μ¤‘μ΄λ memory μ£Όμ†, λ μ§€μ¤ν„°κ°’, ν•λ“μ›¨μ–΄ μƒνƒ ...)

## DMA

http://recipes.egloos.com/5152867
